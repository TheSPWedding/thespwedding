function genrateCaptchaContactForm(){$.get("captcha_code.php",function(data){$('.captcha_contactForm').html(data);});}
genrateCaptchaContactForm();function refreshCaptcha(){genrateCaptchaContactForm();}
jQuery(function(){$("#contact-form-main2").validate({rules:{name:{required:true,minlength:2},phone:{required:true,number:true,minlength:10},attend:{required:true,},guest:{required:function(element){return($("[name=radio-group]:checked").val()=='true')?true:false;},},filename:{required:function(element){return($("[name=radio-group]:checked").val()=='true')?true:false;},},date:{required:function(element){return($("[name=radio-group]:checked").val()=='true')?true:false;},},captcha:{required:true,},},messages:{name:{required:"Please enter your name",minlength:"Your name must consist of at least 2 characters"},phone:{required:"Please enter valid mobile number"},filename:{required:"Please Select your Aadhaar"}},submitHandler:function(form){$('[name=contactSubmit]').html("Please Wait ...").attr('disabled',true);let file=$('[name="filename"]')[0].files[0];if(file){let formData=new FormData();let filename=file.name;formData.append(filename,file);formData.append('filename',filename);$.ajax({url:'https://webm.bizmate.in/bizify/UploadData',type:'POST',data:formData,processData:false,contentType:false,xhrFields:{withCredentials:false},success:function(data){if(data!=''&&data!='Error'&&data!='False'&&data!='error'&&data!='false'){$('[name=imageUrl]').val(data.trim());setTimeout(function(){submitForm(form);},1000);}},error:function(err){console.log(err);}});}}});});function submitForm(form){$(form).ajaxSubmit({type:"POST",data:$(form).serialize(),url:"sendmail.php",success:function(data){let res=$.trim(data);if(res==="Invalid Captcha"){$('.alert-captcha').show();}else{$('.alert-success').show();$('.alert-captcha','.alert-danger').hide();genrateCaptchaContactForm();$('[name=contactSubmit]').html("RSVP").attr('disabled',false);$('[name=name]').val('');$('[name=phone]').val('');$('[name=filename]').val('');$('[name=captcha]').val('');}
setTimeout(function(){$('.alert-captcha').hide();},3000);},error:function(data){console.log("False "+data);$('#contact-form-main').fadeTo("slow",1,function(){$('.alert-danger').show();});}});}